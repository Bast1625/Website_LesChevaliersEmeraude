<div class="d-flex justify-content-center">
    <div class="card w-75">
        <div class="card-header row">
            <div class="col-3 d-flex justify-content-start align-items-start">
                <a class="d-flex flex-row gap-2 fs-4" routerLink="../"> 
                    <fa-icon [icon]="FaGoBackIcon"> </fa-icon> 
                    <span> Retour </span>
                </a>
            </div>

            <div class="col-6 d-flex justify-content-center align-items-center text-center my-4">
                <h1> {{ this.match({ name: this.name, birthPlace: this.birthPlace.name }) }} </h1>  
            </div>

            
            <div class="col-3 d-flex justify-content-end align-items-end">
                <button class="btn btn-primary align-items-end fs-5"
                (click)="this.createCharacter()"> Créer </button>
            </div>
        </div>
        
        <div class="card-body">
            <div class="d-flex flex-column gap-3 mt-4">
                <div class="card">
                    <div class="card-header d-flex flex-row justify-content-between"> 
                        <h2> Identité </h2>
                    </div>

                    <ul class="list-group list-group-flush fs-4">
                        <li class="list-group-item d-flex flex-row justify-content-between"> 
                            <span> Nom </span>
                            <input class=" text-end" [(ngModel)]="this.name">
                        </li>

                        <li class="list-group-item d-flex flex-row justify-content-between"> 
                            <span> Sexe </span>

                            <select class="text-end" [(ngModel)]="this.gender">
                                
                                <option selected> M </option>
                                <option> F </option>
 
                            </select>
                        </li>

                        <li class="list-group-item d-flex flex-row justify-content-between"> 
                            <span> État </span>
                            
                            <span [ngSwitch]="this.deathVolumeId">
                                <span *ngSwitchCase="0"> Vivant </span>
                                <span *ngSwitchDefault> Décédé </span>
                            </span>
                        </li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header d-flex flex-row justify-content-between"> 
                        <h2> Statut </h2>
                    </div>

                    <ul class="list-group list-group-flush fs-4">
                        <li class="list-group-item d-flex flex-row justify-content-between"> 
                            <span> Lieu d'origine </span>
                            
                            <location-selector [(ngModel)]="this.birthPlace"> </location-selector>
                        </li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header d-flex flex-row justify-content-between"> 
                        <h2> Relations </h2>
                        <button class="btn btn-outline-secondary px-3"
                        (click)="this.toggle(this.infoCards[0])"> 
                            <fa-icon [icon]="FaPlusIcon"></fa-icon>
                        </button>
                    </div>

                    <ul class="list-group list-group-flush fs-4">
                        <li class="list-group-item d-flex flex-row justify-content-between"> 
                            <span> Parenté </span>

                            <div class="d-flex flex-column gap-3">
                                <div class="d-flex flex-column gap-2"
                                *ngFor="let family of this.families; let familyIndex = index;">

                                    <span> 
                                        Parents #{{ familyIndex + 1 }} 

                                        <button 
                                        class="btn rounded-4"
                                        (click)="this.markAsBiological(family)"
                                        [ngClass]="{ 
                                            'btn-outline-success': family.isBiological,
                                            'btn-outline-secondary': !family.isBiological
                                        }"
                                        [disabled]="family.isBiological">
                                            <fa-icon [icon]="FaBiologicalIcon"> </fa-icon>
                                        </button>
                                    </span>

                                    <div class="d-flex flex-column gap-2">
    
                                        <character-selector [(ngModel)]="family.parent1Id"> </character-selector>
                                        <character-selector [(ngModel)]="family.parent2Id"></character-selector>                                  
                                        
                                    </div>

                                </div>

                                <div class="d-flex flex-row gap-3 justify-content-center">
                                    <button class="btn btn-primary"
                                    (click)="this.removeFamily()"
                                    [disabled]="this.families.length <= 1">
                                        <fa-icon [icon]="FaMinusIcon"> </fa-icon>
                                    </button>

                                    <button class="btn btn-primary"
                                    (click)="this.addFamily()"
                                    [disabled]="this.families.length >= 5">
                                        <fa-icon [icon]="FaPlusIcon"> </fa-icon>
                                    </button>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header d-flex flex-row justify-content-between"> 
                        <h2> Tomes </h2>
                        <button class="btn btn-outline-secondary px-3"
                        (click)="this.toggle(this.infoCards[0])"> 
                            <fa-icon [icon]="FaPlusIcon"></fa-icon>
                        </button>
                    </div>

                    <ul class="list-group list-group-flush fs-4">
                        <li class="list-group-item d-flex flex-row justify-content-between"> 
                            <span> Tome d'apparition </span>

                            <volume-selector [(ngModel)]="this.appearanceVolumeId"> </volume-selector>
                        </li>

                        <li class="list-group-item d-flex flex-row justify-content-between"> 
                            <span> Tome de décès </span>

                            <volume-selector [(ngModel)]="this.deathVolumeId"> </volume-selector>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- <div class="d-flex flex-row justify-content-evenly my-5">

                <div class="d-flex flex-column"
                *ngFor="let infoCard of this.infoCards">

                    <span class="text-center"> {{ infoCard.name }} - {{ infoCard.toggled }} </span>
                    <button class="btn btn-primary px-4 py-3"
                    (click)="this.toggle(infoCard)">
                        <fa-icon class="fs-3" [icon]="this.FaPlusIcon"> </fa-icon>
                    </button>

                </div>

            </div> -->
        </div>

    </div>
</div>

